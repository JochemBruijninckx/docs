## BlockedHoursConstraint

**JSON:** `employeeAvailabilityConstraints`

**Rule ID:** `blockinghours_rule_id`

**Blocking hours on day 12**

<Columns cols={2}>
  <div>
    **XML**
    ```xml
    <BlockedHoursConstraint>
      <Block>
        <DayIndex>12</DayIndex>
        <TimeStart>00:00</TimeStart>
        <TimeEnd>24:00</TimeEnd>
      </Block>
    </BlockedHoursConstraint>
    ```
  </div>
  <div>
    **JSON**
    ```json
    "employeeAvailabilityConstraints": [
      {
        "id": "eac-off-on-day-12",
        "importance": "STRICT",
        "isDesired": false,
        "periods": {
          "days": {
            "dayIndices": [12]
          }
        }
      }
    ]
    ```
  </div>
</Columns>

## DayRestRule

**JSON:** `periodicRestConstraints`

**Source:** `ScheduleRow.DayRestRule`

**11 hours rest starting at 0:00**

<Columns cols={2}>
  <div>
    **XML** ```xml
    <DayRestRule>
      <Id>013N0068H001</Id>
      <Type>TIME</Type>
      <MinRestHours>11</MinRestHours>
      <TimeStart>0:00</TimeStart>
    </DayRestRule>
    ```
  </div>
  <div>
    **JSON**
    <p>
      <em>See PeriodicRestConstraint documentation</em>
    </p>
  </div>
</Columns>

**Note:** Start with ONE period rest

## WeeklyRestRule

**JSON:** `periodicRestConstraints`

**Source:** `ScheduleRow.WeeklyRestRule`

**36 hours rest over 7 days starting on day 6 at 14:00**

<Columns cols={2}>
  <div>
    **XML** ```xml
    <WeeklyRestRule>
      <Id>013N0003100N</Id>
      <NbrOfDays>7</NbrOfDays>
      <MinRestHours>36</MinRestHours>
      <DayStart>6</DayStart>
      <TimeStart>14:00</TimeStart>
    </WeeklyRestRule>
    ```
  </div>
  <div>
    **JSON**
    <p>
      <em>See PeriodicRestConstraint documentation</em>
    </p>
  </div>
</Columns>

**Note:** Start with ONE period rest

## RestBetweenShifts

**JSON:** `cooldownConstraints`

**Minimum 15 hours rest between shifts**

<Columns cols={2}>
  <div>
    **XML**
    ```xml
    <RestBetweenShiftsConstraint>
      <Id>min_hours_between_shifts#15</Id>
      <MinRestHours>15</MinRestHours>
      <Types>
        <Type>WORK</Type>
      </Types>
      <ScheduleRows>
        <RowNbr>1</RowNbr>
        <RowNbr>2</RowNbr>
      </ScheduleRows>
    </RestBetweenShiftsConstraint>
    ```
  </div>
  <div>
    **JSON**
    ```json
    "cooldownConstraints": [
      {
        "id": "cd-min-15-hours",
        "importance": "STRICT",
        "filters": {
          "employees": {
            "ids": ["1", "2"]
          }
        },
        "starts": {
          "shifts": {
            "labels": ["type:work"]
          }
        },
        "ends": {
          "shifts": {
            "labels": ["type:work"]
          }
        },
        "targets": {
          "minHours": 15
        }
      }
    ]
    ```
  </div>
</Columns>

## WeekendDistributionConstraint

**JSON:** `periodDistributionConstraints`

**Maximum 6 weekends with 1 free neighbor**

<Columns cols={2}>
  <div>
    **XML**
    ```xml
    <WeekendDistributionConstraint>
      <Id>max_weekends#6#1</Id>
      <Weight>100</Weight>
      <Percentage>50.00</Percentage>
      <FreeNeighbours>1</FreeNeighbours>
      <Types>
        <Type>WORK</Type>
        <Type>ON_DUTY</Type>
      </Types>
      <ScheduleRows>
        <RowNbr>1</RowNbr>
        <RowNbr>2</RowNbr>
      </ScheduleRows>
    </WeekendDistributionConstraint>
    ```
  </div>
  <div>
    **JSON**
    ```json
    "periodDistributionConstraints": [
      {
        "id": "pdc-max-6",
        "importance": "STRICT",
        "maxWorkedPeriods": 6,
        "minSurroundingFreePeriods": 1,
        "filters": {
          "employees": {
            "ids": ["1", "2"]
          },
          "shifts": {
            "labels": ["type:work", "type:on-duty"]
          }
        },
        "periods": {
          "labels": ["weekends"]
        }
      }
    ]
    ```
  </div>
</Columns>

**Minimum 1 weekend**

<Columns cols={2}>
  <div>
    **XML**
    ```xml
    <WeekendDistributionConstraint>
      <Id>min_weekends#1#</Id>
      <Weight>100</Weight>
      <Percentage>8.33</Percentage>
      <Types>
        <Type>WORK</Type>
        <Type>ON_DUTY</Type>
      </Types>
      <ScheduleRows>
        <RowNbr>1</RowNbr>
        <RowNbr>2</RowNbr>
      </ScheduleRows>
    </WeekendDistributionConstraint>
    ```
  </div>
  <div>
    **JSON**
    ```json
    "periodDistributionConstraints": [
      {
        "id": "pdc-min-1",
        "importance": "STRICT",
        "minWorkedPeriods": 1,
        "filters": {
          "employees": {
            "ids": ["1", "2"]
          },
          "shifts": {
            "labels": ["type:work", "type:on-duty"]
          }
        },
        "periods": {
          "labels": ["weekends"]
        }
      }
    ]
    ```
  </div>
</Columns>

## PointConstraint

**JSON:** `employeeAvailabilityConstraints`

**Unwanted hours on Monday and Tuesday nights**

<Columns cols={2}>
  <div>
    **XML**
    ```xml
    <PointConstraint>
      <Id>PREFERABLE_HOURS</Id>
      <Weight>99</Weight>
      <Interval>
        <!-- Weekday 1=Monday ... 7=Sunday !-->
        <WeekDay>1</WeekDay>
        <TimeStart>00:00</TimeStart>
        <TimeEnd>06:00</TimeEnd>
        <Points>4</Points>
        <Type>WORK</Type>
      </Interval>
      <Interval>
        <!-- Weekday 1=Monday ... 7=Sunday !-->
        <WeekDay>2</WeekDay>
        <TimeStart>00:00</TimeStart>
        <TimeEnd>06:00</TimeEnd>
        <Points>2</Points>
        <Type>WORK</Type>
      </Interval>
      <ScheduleRows>
        <RowNbr>1</RowNbr>
        <RowNbr>2</RowNbr>
      </ScheduleRows>
    </PointConstraint>
    ```
  </div>
  <div>
    **JSON**
    ```json
    "employeeAvailabilityConstraints": [
      {
        "id": "eac-monday-night",
        "importance": "HIGH",
        "isDesired": false,
        "filters": {
          "employees": {
            "ids": ["1", "2"]
          },
          "shifts": {
            "labels": ["type:work"]
          }
        },
        "periods": {
          "days": {
            "daysOfWeek": ["MON"],
            "startTime": "00:00",
            "endTime": "06:00"
          }
        }
      },
      {
        "id": "eac-tuesday-night",
        "importance": "MEDIUM",
        "isDesired": false
      }
    ]
    ```
  </div>
</Columns>

## ShiftPatternConstraint

**Maximum 3 consecutive days off**

<Columns cols={2}>
  <div>
    **XML**
    ```xml
<ShiftPatternConstraint>
  <Id>max_continous_dayoff#3</Id>
  <Weight>-90</Weight>
  <Pattern>
    <ShiftType>DAYOFF</ShiftType>
    <ShiftType>DAYOFF</ShiftType>
    <ShiftType>DAYOFF</ShiftType>
    <ShiftType>DAYOFF</ShiftType>
  </Pattern>
  <ScheduleRows>
    <RowNbr>1</RowNbr>
    <RowNbr>2</RowNbr>
  </ScheduleRows>
</ShiftPatternConstraint>
    ```
  </div>
  <div>
    **JSON**
    ```json
"employeeUtilizationConstraints": [ // alternative
  {
    "id": "euc-max-3-consecutive-days-off",
    "importance": "VERY_HIGH",
    "filters": {
      "employees": {
        "ids": ["1", "2"]
      }
    },
    "targets": {
      "minShifts": 1
    },
    "periods": {
      "recurrentDefinition": {
        "daysPerPeriod": 4,
        "daysBetweenStarts": 1
      }
    }
  }
]
    ```
  </div>
</Columns>

_Note_: The 'day off' case is not supported on ConsecutiveConstraint, and the below example is a workaround for that.
We will support this case on ConsecutiveConstraint as well in the future.

The other examples (min/max consecutive night/evening/etc) are supported on ConsecutiveConstraint, like such:

```json
"consecutiveConstraints": [
  {
    "id": "cc-max-3-consecutive-nights",
    "importance": "STRICT",
    "filters": {
      "employees": {
        "ids": ["1", "2"]
      },
      "shifts": {
        "labels": ["night"]
      }
    },
    "targets": {
      "max": 3
    }
  }
]
```

## ShiftUtilizationConstraint

**JSON:** `employeeUtilizationConstraints`

**20-57 workdays**

<Columns cols={2}>
  <div>
    **XML**
    ```xml
    <ShiftUtilizationConstraint>
      <Id>max_workdays#57#20</Id>
      <Weight>100</Weight>
      <MaxOccurrence>57</MaxOccurrence>
      <MinOccurrence>20</MinOccurrence>
      <Shifts>
        <Type>WORK</Type>
        <Type>ON_DUTY</Type>
      </Shifts>
      <ScheduleRows>
        <RowNbr>1</RowNbr>
        <RowNbr>2</RowNbr>
      </ScheduleRows>
    </ShiftUtilizationConstraint>
    ```
  </div>
  <div>
    **JSON**
    ```json
    "employeeUtilizationConstraints": [
      {
        "id": "euc-days",
        "importance": "VERY_HIGH",
        "filters": {
          "employees": {
            "ids": ["1", "2"]
          },
          "shifts": {
            "labels": ["type:work", "type:on-duty"]
          }
        },
        "targets": {
          "minShifts": 20,
          "maxShifts": 57
        }
      }
    ]
    ```
  </div>
</Columns>

### max_nights / min_nights

**1-10 night shifts**

<Columns cols={2}>
  <div>
    **XML**
    ```xml
    <ShiftUtilizationConstraint>
      <Id>max_nights#10#1</Id>
      <Weight>100</Weight>
      <MaxOccurrence>10</MaxOccurrence>
      <MinOccurrence>1</MinOccurrence>
      <Shifts>
        <Type>NIGHT_W_NEXT</Type>
        <Type>NIGHT_WD_NEXT</Type>
        <Type>NIGHT_W</Type>
        <Type>NIGHT_W_PREV</Type>
        <Type>NIGHT_WD_PREV</Type>
      </Shifts>
      <ScheduleRows>
        <RowNbr>1</RowNbr>
        <RowNbr>2</RowNbr>
      </ScheduleRows>
    </ShiftUtilizationConstraint>
    ```
  </div>
  <div>
    **JSON**
    ```json
    "employeeUtilizationConstraints": [
      {
        "id": "euc-nights",
        "importance": "VERY_HIGH",
        "filters": {
          "employees": {
            "ids": ["1", "2"]
          },
          "shifts": {
            "labels": ["night"]
          }
        },
        "targets": {
          "minShifts": 1,
          "maxShifts": 10
        }
      }
    ]
    ```
  </div>
</Columns>

### min_hours_week

**Source:** `Row.MinWeekHours`

**Minimum hours per week**

```json
"employeeUtilizationConstraints": [
  {
    "id": "euc-hours-per-week",
    "importance": "MEDIUM",
    "filters": {
      "employees": {
        "ids": ["X"]
      }
    },
    "targets": {
      "minHours": Y,
      "maxHours": Z
    },
    "periods": {
      "recurrentDefinition": {
        "daysPerPeriod": 7,
        "startDay": {
          "dayIndex": 0
        }
      }
    }
  }
]
```

### max_hours_week

**Source:** `Row.MaxWeekHours`

**Note:** See above

## ShiftLayoutConstraint

**JSON:** `cooldownConstraints`

**3 days between specific shifts**

<Columns cols={2}>
  <div>
    **XML**
    ```xml
    <ShiftLayoutConstraint>
      <Id>days_between_undesirable#3</Id>
      <Weight>100</Weight>
      <MinDays>3</MinDays>
      <Shifts>
        <Name>Dag2</Name>
        <Name>Kvzaezll</Name>
      </Shifts>
      <ScheduleRows>
        <RowNbr>1</RowNbr>
        <RowNbr>2</RowNbr>
      </ScheduleRows>
    </ShiftLayoutConstraint>
    ```
  </div>
  <div>
    **JSON**
    ```json
    "cooldownConstraints": [
      {
        "id": "cd-days-between-shifts",
        "importance": "STRICT",
        "filters": {
          "employees": {
            "ids": ["1", "2"]
          }
        },
        "starts": {
          "shifts": {
            "ids": ["Dag2", "Kvzaezli"]
          }
        },
        "ends": {
          "shifts": {
            "ids": ["Dag2", "Kvzaezli"]
          }
        },
        "targets": {
          "minDays": 3
        }
      }
    ]
    ```
  </div>
</Columns>

## ConsecutiveTimeOffConstraint

**JSON:** `consecutiveTimeOffConstraints`

**Minimum 1 long weekend of 3 days**

<Columns cols={2}>
  <div>
    **XML**
    ```xml
    <ConsecutiveTimeOffConstraint>
      <Id>min_longweekends#1#3</Id>
      <Weight>100</Weight>
      <MinNumberOfDays>3</MinNumberOfDays>
      <MinNumberOfWeeks>1</MinNumberOfWeeks>
      <Type>DAY_BASED</Type>
      <RequiredWeekDays>
        <WeekDay>6</WeekDay>
        <WeekDay>7</WeekDay>
      </RequiredWeekDays>
      <ScheduleRows>
        <RowNbr>1</RowNbr>
        <RowNbr>2</RowNbr>
      </ScheduleRows>
    </ConsecutiveTimeOffConstraint>
    ```
  </div>
  <div>
    **JSON**
    ```json
    "consecutiveTimeOffConstraints": [
      {
        "id": "cto-long-weekends",
        "importance": "STRICT",
        "dayOffType": "DAY_BETWEEN_SHIFTS",
        "minNumberOfDays": 3,
        "minNumberOfWeeks": 1,
        "requiredWeekDaysOff": [6, 7],
        "filters": {
          "employees": {
            "ids": ["1", "2"]
          }
        }
      }
    ]
    ```
  </div>
</Columns>

---

## XML-file based constraints with dynamic weight settings

### AdjustedTimeConstraints

**ID:** `RESCHEDULE_FAIR_HOURS`

**Fair rescheduling of hours**

<Columns cols={2}>
  <div>
    **XML** ```xml
    <AdjustedTimeConstraint>
      <Id>RESCHEDULE_FAIR_HOURS</Id>
      <Weight>90</Weight>
      <RateAdjustFairness>false</RateAdjustFairness>
      <Types>
        <Type>WORK</Type>
        <Type>ON_DUTY</Type>
      </Types>
    </AdjustedTimeConstraint>
    ```
  </div>
  <div>
    **JSON**
    <p>
      <em>Yet to be supported</em>
    </p>
  </div>
</Columns>

### NewWorkingDayConstraints

**IDs:**

- `RESCHEDULE_FAIR_DAYS`
- `RESCHEDULE_FAIR_DAYS_WEEKEND`

**Fair rescheduling of weekend days**

<Columns cols={2}>
  <div>
    **XML** ```xml
    <NewWorkingDayConstraint>
      <Id>RESCHEDULE_FAIR_DAYS_WEEKEND</Id>
      <Weight>99</Weight>
      <WeekDays>6#7</WeekDays>
      <Types>
        <Type>WORK</Type>
        <Type>ON_DUTY</Type>
      </Types>
    </NewWorkingDayConstraint>
    ```
  </div>
  <div>
    **JSON**
    <p>
      <em>Yet to be supported</em>
    </p>
  </div>
</Columns>

### ShiftPatternConstraint

**JSON:** `patternConstraints`

**ID:** `FRI_OFF_IF_SAT_SUN_MON`

**Friday off if Saturday-Sunday-Monday worked**

<Columns cols={2}>
  <div>
    **XML**
    ```xml
    <ShiftPatternConstraint>
      <Id>FRI_OFF_IF_SAT_SUN_MON</Id>
      <Weight>-90</Weight>
      <WeekDayStart>5</WeekDayStart>
      <Pattern>
        <ShiftType>!DAYOFF</ShiftType>
        <ShiftType>WORK#ON_DUTY</ShiftType>
        <ShiftType>WORK#ON_DUTY</ShiftType>
        <ShiftType>WORK#ON_DUTY</ShiftType>
      </Pattern>
      <ScheduleRows>
        <RowNbr>1</RowNbr>
        <RowNbr>2</RowNbr>
      </ScheduleRows>
    </ShiftPatternConstraint>
    ```
  </div>
  <div>
    **JSON**
    ```json
    "patternConstraints": [
      {
        "id": "pc-fri-off-if-sat-sun-mon",
        "importance": "MEDIUM",
        "isDesired": false,
        "filters": {
          "employees": {
            "ids": ["1", "2"]
          }
        },
        "patterns": [
          {
            "startDays": {
              "daysOfWeek": ["FRI"]
            },
            "patternDays": [
              {
                "keyword": "ANY_SHIFT"
              },
              {
                "shifts": {
                  "labels": ["type:work", "type:on-duty"]
                }
              },
              {
                "shifts": {
                  "labels": ["type:work", "type:on-duty"]
                }
              },
              {
                "shifts": {
                  "labels": ["type:work", "type:on-duty"]
                }
              }
            ]
          }
        ]
      }
    ]
    ```
  </div>
</Columns>

### ShiftUtilizationConstraint

**JSON:** `employeeUtilizationConstraints`

**ID:** `FAIR_EVENINGS`

**Fair distribution of evening shifts**

<Columns cols={2}>
  <div>
    **XML**
    ```xml
<ShiftUtilizationConstraint>
  <Id>FAIR_EVENINGS</Id>
  <Weight>0</Weight>
  <Fairness>90</Fairness>
  <RateAdjustFairness>true</RateAdjustFairness>
  <MaxOccurrence>0</MaxOccurrence>
  <Shifts>
    <Type>EVENING_W</Type>
    <Type>EVENING_WD</Type>
    <Type>EVENING_D</Type>
  </Shifts>
  <ScheduleRows>
    <RowNbr>1</RowNbr>
    <RowNbr>2</RowNbr>
  </ScheduleRows>
</ShiftUtilizationConstraint>
    ```
  </div>
  <div>
    **JSON**
    ```json
{
  "constraints": {
    "employeeUtilizationConstraints": [
      {
        "id": "FAIR_EVENINGS_UTILIZATION",
        "importance": "NONE",
        "targets": {
          "idealShifts": 0
        },
        "filters": {
          "employees": {
            "ids": ["1", "2"]
          },
          "shifts": {
            "labels": ["evening"]
          }
        }
      }
    ],
    "fairnessConstraints": [
      {
        "id": "FAIR_EVENINGS",
        "importance": "HIGH",
        "constraintIds": ["FAIR_EVENINGS_UTILIZATION"],
        "applyWorkloadScaling": true
      }
    ]
  }
}
    ```
  </div>
</Columns>

### WeekendDistributionConstraint

**JSON:** `periodDistributionConstraints`

**ID:** `FAIR_WEEKENDS`

**Fair distribution of weekends**

<Columns cols={2}>
  <div>
    **XML**
    ```xml
<WeekendDistributionConstraint>
  <Id>FAIR_WEEKENDS</Id>
  <Weight>0</Weight>
  <Fairness>99</Fairness>
  <Percentage>100.00</Percentage>
  <Types>
    <Type>WORK</Type>
    <Type>ON_DUTY</Type>
  </Types>
  <ScheduleRows>
    <RowNbr>1</RowNbr>
    <RowNbr>2</RowNbr>
  </ScheduleRows>
</WeekendDistributionConstraint>
    ```
  </div>
  <div>
    **JSON**
    ```json
{
  "constraints": {
    "periodDistributionConstraints": [
      {
        "id": "AVOID_WEEKENDS",
        "importance": "NONE",
        "filters": {
          "employees": {
            "ids": ["1", "2"]
          },
          "shifts": {
            "labels": ["type:work", "type:on-duty"]
          }
        },
        "maxWorkedPeriods": 0,
        "periods": {
          "labels": ["weekends"]
        }
      }
    ],
    "fairnessConstraints": [
      {
        "id": "FAIR_WEEKENDS",
        "importance": "VERY_HIGH",
        "constraintIds": ["AVOID_WEEKENDS"]
      }
    ]
  },
  "configuration": {
    "periodLabels": [
      {
        "label": "weekends",
        "periods": {
          "recurrentDefinition": {
            "daysPerPeriod": 2,
            "daysBetweenStarts": 7,
            "startDay": {
              "date": "2024-12-21" // Starts on a Saturday, repeat every 7 days
            }
          }
        }
      }
    ]
  }
}
    ```
  </div>
</Columns>

## WeeklyRestConstraint

**JSON:** `periodicRestConstraints`

**ID:** `WEEKLYRESTHOUR_45`

**45 hours rest per week**

<Columns cols={2}>
  <div>
    **XML**
    ```xml
    <WeeklyRestConstraint>
      <Id>WEEKLYRESTHOUR_45</Id>
      <Weight>50</Weight>
      <RestHours>45</RestHours>
      <ScheduleRows>
        <RowNbr>1</RowNbr>
        <RowNbr>2</RowNbr>
      </ScheduleRows>
    </WeeklyRestConstraint>
    ```
  </div>
  <div>
    **JSON**
    ```json
    "periodicRestConstraints": [
      {
        "id": "prc-weekly-45-hours",
        "importance": "MEDIUM",
        "filters": {
          "employees": {
            "ids": ["1", "2"]
          }
        },
        "minimumContinuousRestDuration": {
          "hours": 45
        },
        "periods": {
          "recurrentDefinition": {
            "daysPerPeriod": 7
          }
        }
      }
    ]
    ```
  </div>
</Columns>
